---
title: SelectQuery Class
sidebar_position: 3
slug: /sqlquerybuilder/queryobjects/selectqueryclass
description: SelectQuery Class
keywords:
  - methods
  - select
  - query
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Construction

SQB namespace, [Pool](/docs/docs/connectionwrapper/poolclass) and [Connection](/docs/docs/connectionwrapper/connectionclass) have `select()` function that creates SelectQuery instance.
:::info
A Query instance that created by [Pool](/docs/docs/connectionwrapper/poolclass) and [Connection](/docs/docs/connectionwrapper/connectionclass) can be executed directly.
:::
    query = (sqb|pool|connection).select(..column)

If any argument passed to constructor, columns() method is called with given arguments.

## Methods

### SelectQuery.prototype.as()

Sets alias for sub-select queries

`.as(alias)`

- `alias` (String) : Alias for query.

- **Returns**: SelectQuery itself.

```js
var query = sqb.select('p.id')
    .from(sqb.select().from('person').as('p'));
```

```sql
Generated SQL for Postgres:
select p.id from (select * from person) p
```

### SelectQuery.prototype.columns()

Defines "columns" part of select query.
<Tabs>
<TabItem value="Alternative-1" label="Alternative-1">

`.columns(...column)`

- `column` : String representation of column name

    **Format:**

    [(tableName|tableAlias).] fieldname [as] [columnAlias]

```js
.select(
  'field1',
  'field2 as f1',
  'field3 f1',
  'table1.field4',
  't1.field5',
  't1.field6 f6'
).from('table1 t1')
```

- **Returns**: SelectQuery itself.

```js
var query = sqb.select('c.id', 'c.name customer_name').from('customer c');
```

```sql
Generated SQL for Postgres:
select c.id, c.name customer_name from customer c
```
</TabItem>

<TabItem value="Alternative-2" label="Alternative-2">

`.columns(...selectQuery)`

- `selectQuery` : Instance of a SelectQuery.
- **Returns**: SelectQuery itself.

```js
var query = sqb.select('c.id',
    sqb.select('name').from('person').where(Op.eq('id', 1)).as('persone_name')
).from('customer c');
```

```sql
Generated SQL for Postgres:
select c.id, (select name from person where id = 1) persone_name from customer c
```
</TabItem>

<TabItem value="Alternative-3" label="Alternative-3">

`.columns(...raw)`

- `raw` : Raw sql object.
- **Returns**: SelectQuery itself.

```js
var query = sqb.select('id', sqb.raw('anyfunc()')).from('customer');
```

```sql
Generated SQL for Postgres:
select id, anyfunc() from customer
```
</TabItem>
</Tabs>

### SelectQuery.prototype.from()

Defines "from" part of select query.

<Tabs>
<TabItem value="Alternative-1" label="Alternative-1">

`.from(...tableName)`

- `tableName` : String representation of table name.
- **Returns**: SelectQuery itself.

```js
var query = sqb.select('c.*').from('customer c');
```

``` sql
Generated SQL for Postgres:
select c.* from customer c
```
</TabItem>

<TabItem value="Alternative-2" label="Alternative-2">

`.from(...selectSql)`

- `selectSql` : Instance of a SelectQuery.
- **Returns**: SelectQuery itself.

```js
var query = sqb.select('t1.id', 't1.name').from(
    sqb.select().from('person').as('t1')
);
```

```sql
Generated SQL for Postgres:
select t1.id, t1.name from (select * from person) t1
```
</TabItem>

<TabItem value="Alternative-3" label="Alternative-3">

`.from(...raw)`

- `raw` : Raw sql object.
- **Returns**: SelectQuery itself.

```js
var query = sqb.select('id', 'name').from(
    sqb.raw('anyproc()')
);
```

```sql
Generated SQL for Postgres:
select id, name from anyproc()
```
</TabItem>
</Tabs>

### SelectQuery.prototype.groupBy()

Defines "group by" part of `query`.

`.groupBy(...column)`

- `column` (String|Raw) : String representation of column name or Raw sql.

- **Returns**: SelectQuery itself.

```js
var query = sqb.select('c.name')
    .from('customer c')
    .groupBy('age');
```

```sql
Generated SQL for Postgres:
select c.name from customer c
group by age
```

### SelectQuery.prototype.join()

Adds "join" statements to `query`.

`.join(..join)`

- `join` (Join): Instance of [Join](/docs/docs/sqlquerybuilder/sqlobjects/joinclass) class
- **Returns**: SelectQuery itself.

```js
var query = sqb.select('c.*')
    .from('customer c')
    .join(sqb.join('person p').on(['p.id', sqb.raw('c.person_id')]));
```

```sql
Generated SQL for Postgres:
select c.* from customer c
inner join person p on p.id = c.person_id
```

### SelectQuery.prototype.limit()

Sets limit for `query`.

`.limit(value)`

- `value` (Number) : Value for limit

- **Returns**: SelectQuery itself.

```js
var query = pool.select().from('customer').limit(10);
```

```sql
Generated SQL for Postgres:
select * from customer
LIMIT 10
```

```sql
Generated SQL for Oracle 11g:
select * from (
  select * from customer
) where rownum <= 10
```

```sql
Generated SQL for Oracle 12c:
select * from customer
FETCH FIRST 10 ROWS ONLY
```

### SelectQuery.prototype.offset()

Sets offset for `query`.

`.offset(value)`

- `value` (Number) : Value for offset

- **Returns**: SelectQuery itself.

```js
var query = pool.select().from('customer').offset(25).limit(10);
```

```sql
Generated SQL for Postgres:
select * from customer
LIMIT 10 OFFSET 25

```

```sql
Generated SQL for Oracle 11g:
select * from (
  select /*+ first_rows(10) */ t.*, rownum row$number from (
    select * from customer
  ) t where rownum <= 35
) where row$number >= 26
```

```sql
Generated SQL for Oracle 12c:
select * from customer
OFFSET 25 ROWS FETCH NEXT 10 ROWS ONLY
```

### SelectQuery.prototype.orderBy()

Defines "order by" part of `query`.

`.orderBy(...column)`

- `column` (String|Raw) : String representation of column name or Raw sql. Format:

```markup
  [+|-] [(tablename|alias).] fieldname [asc|ascending|dsc|descending]
```

```ts
.orderBy(
"field1",            // field1 ascending
"field1 asc",        // field1 ascending
"field1 ascending",  // field1 ascending
"+field1",           // field1 ascending

"field1 desc",       // field1 descending
"field1 descending", // field1 descending
"-field1",           // field1 descending

  "table2.field2",     // table2.field2 ascending
  "-table2.field2",    // table2.field2 descending
)
```

- **Returns**: SelectQuery itself.

**Example**

```ts
var query = sqb.select('id', 'name')
    .from('customer')
    .orderBy('f1', '-f2', 'f3 desc', 'f4 descending');
```

```sql
Generated SQL for Postgres:
select id, name from customer
order by f1, f2 desc, f3 desc, f4 desc
```

### SelectQuery.prototype.where()

Defines "where" part of `query`.

`.where(..conditions)`

- `conditions`: [condition](/docs/docs/sqlquerybuilder/sqloperations#operators) arrays.
- **Returns**: UpdateQuery itself.

```ts
const query = sqb.delete('customer')
    .where(Op.like('name', '%john%'));
```

### Query.prototype.execute()

Executes query and returns Promise. Please check [executing queries](/docs/docs/connectionwrapper/executingqueries) section for details.

```ts
pool.select()
    .from('customer')
    .where({'name like': '%john%'})
    .execute({
       autoCommit: true
     }).then(result => {
       console.log(result.rowset.length, ' rows fetched');
     });
```

### Query.prototype.values()

Sets execution values for query. Please check [executing queries](/docs/docs/connectionwrapper/executingqueries) section for details.

```ts
const query = pool.select()
    .from('customer')
    .where(Op.like('name', /Name/));

....
query.values({Name: request.values.Name)
    .execute({
       autoCommit: true
     }).then(result => {
       console.log(result.rowset.length, ' rows fetched');
     });
```

## Event

### fetch

This event will be called whenever a row fetched from database. This is useful when row values need to be modified before caching by Cursor, or etc.

```ts
pool.select().from('table1')
    .on('fetch', function(row) {
      row.CalcField = row.price * row.quantity;
    })
    .execute({
      objectRows: true
    }, function(err, result) {
      .....
    });
})
```